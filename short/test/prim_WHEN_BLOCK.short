protocol WHEN_BLOCK {
  interaction i {
    role R {
      when a {
        when b {
          state BOOLEAN b
	  handle event x {
	    change sx = 1
	  }
	  when c handle event y {
	    change sy = 1
	  }
        }
 	when d handle event z {
	  change sz = 1
	}
        state BOOLEAN c	
      }
      when e handle event f {
	change sf = 1
      }
    }
  }
}
